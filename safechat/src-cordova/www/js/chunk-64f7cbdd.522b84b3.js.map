{"version":3,"sources":["webpack:///./src/views/Chat.vue?155d","webpack:///./src/views/Chat.vue","webpack:///./src/views/Chat.vue?b71a","webpack:///./src/views/Chat.vue?ff17","webpack:///./src/views/Chat.vue?8832","webpack:///./src/mixins/OtherUserDetails.js","webpack:///./src/views/Users.vue?54dd","webpack:///./src/views/Users.vue","webpack:///./src/views/Users.vue?fe94","webpack:///./src/views/Users.vue?1eb8"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","class","$q","dark","isActive","otherUserDetails","online","_e","staticClass","_v","_s","name","showMessages","_l","message","key","attrs","from","userDetails","text","getStamp","timestamp","staticStyle","on","$event","preventDefault","stopPropagation","sendMessage","type","indexOf","_k","keyCode","scopedSlots","_u","fn","proxy","model","value","callback","$$v","newMessage","expression","staticRenderFns","mixins","mixinOtherUserDetails","data","components","users","computed","mapState","methods","mapActions","console","log","Date","toLocaleString","firebaseSendMessage","otherUserId","$route","params","clearMessage","$refs","focus","scrollToBottom","chat","Chat","$el","setTimeout","window","scrollTo","scrollHeight","watch","messages","val","Object","keys","length","mounted","firebaseGetMessages","destroyed","firebaseStopGettingMessages","component","options","assign","create","QPage","QBanner","QDrawer","QChatMessage","QFooter","QToolbar","QForm","QInput","QBtn","$store","state","store","user","directives","rawName","charAt","mapGetters","QList","QItem","QItemSection","QAvatar","QItemLabel","QBadge","Ripple"],"mappings":"0IAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,IAAI,OAAOC,MAAMP,EAAIQ,GAAGC,KAAKC,SAAW,uBAAyB,yBAAyB,CAAGV,EAAIW,iBAAiBC,OAAiIZ,EAAIa,KAA7HT,EAAG,WAAW,CAACU,YAAY,mCAAmC,CAACd,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIW,iBAAiBM,MAAM,iBAA0Bb,EAAG,MAAM,CAACU,YAAY,iCAAiCP,MAAM,CAAE,WAAeP,EAAIkB,eAAgBlB,EAAImB,GAAInB,EAAY,UAAE,SAASoB,EAAQC,GAAK,OAAOjB,EAAG,iBAAiB,CAACiB,IAAIA,EAAIC,MAAM,CAAC,KAAuB,MAAhBF,EAAQG,KAAevB,EAAIwB,YAAYP,KAAOjB,EAAIW,iBAAiBM,KAAK,KAAO,CAACG,EAAQK,MAAM,KAAuB,MAAhBL,EAAQG,KAA4B,WAA2B,MAAhBH,EAAQG,KAAe,UAAY,UAAU,aAA6B,MAAhBH,EAAQG,KAAe,QAAU,QAAQ,MAAQvB,EAAI0B,SAASN,EAAQO,iBAAgB,GAAGvB,EAAG,WAAW,CAACwB,YAAY,CAAC,mBAAmB,WAAWN,MAAM,CAAC,SAAW,KAAK,CAAClB,EAAG,YAAY,CAACA,EAAG,SAAS,CAACU,YAAY,aAAae,GAAG,CAAC,OAAS,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBhC,EAAIiC,YAAYH,MAAW,CAAC1B,EAAG,UAAU,CAACE,IAAI,aAAagB,MAAM,CAAC,WAAWtB,EAAIQ,GAAGC,KAAKC,SAAW,OAAS,QAAQ,SAAW,GAAG,QAAU,GAAG,MAAQ,UAAU,MAAQ,IAAImB,GAAG,CAAC,QAAU,SAASC,GAAQ,OAAIA,EAAOI,KAAKC,QAAQ,QAAQnC,EAAIoC,GAAGN,EAAOO,QAAQ,QAAQ,GAAGP,EAAOT,IAAI,SAAkB,MAAOS,EAAOC,iBAAwB/B,EAAIiC,YAAYH,MAAUQ,YAAYtC,EAAIuC,GAAG,CAAC,CAAClB,IAAI,QAAQmB,GAAG,WAAW,MAAO,CAACpC,EAAG,QAAQ,CAACkB,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,GAAG,KAAO,SAAS,MAAQ,QAAQ,KAAO,QAAQO,GAAG,CAAC,MAAQ,SAASC,GAAyD,OAAjDA,EAAOC,iBAAiBD,EAAOE,kBAAyBhC,EAAIiC,YAAYH,SAAcW,OAAM,KAAQC,MAAM,CAACC,MAAO3C,EAAc,WAAE4C,SAAS,SAAUC,GAAM7C,EAAI8C,WAAWD,GAAKE,WAAW,iBAAiB,IAAI,IAAI,IAAI,IAClyDC,EAAkB,G,4tBC4DP,OACbC,OAAQ,CAACC,QACTC,KAFa,WAGX,MAAO,CACLL,WAAY,GACZ5B,cAAc,IAIlBkC,WAAY,CACVC,oBAGFC,SAAU,EAAF,GACHC,eAAS,QAAS,CAAC,WAAY,iBAEpCC,QAAS,EAAF,GACFC,eAAW,QAAS,CACrB,sBACA,8BACA,wBAJG,CAMLxB,YANO,WAOkB,IAAnBhC,KAAK6C,aACPY,QAAQC,IAAI,mBAAmB,IAAIC,MAAOC,kBAC1C5D,KAAK6D,oBAAoB,CACvB1C,QAAS,CACPK,KAAMxB,KAAK6C,WACXnB,WAAW,IAAIiC,MAAOC,iBACtBtC,KAAM,MAERwC,YAAa9D,KAAK+D,OAAOC,OAAOF,cAElC9D,KAAKiE,iBAGTA,aApBO,WAqBLjE,KAAK6C,WAAa,GAClB7C,KAAKkE,MAAMrB,WAAWsB,SAExBC,eAxBO,WAyBL,IAAIC,EAAOrE,KAAKkE,MAAMI,KAAKC,IAC3BC,YAAW,WACTC,OAAOC,SAAS,EAAGL,EAAKM,gBACvB,KAELlD,SA9BO,SA8BEC,GACP,OAAOA,KAgBXkD,MAAO,CACLC,SAAU,SAASC,GAAK,WAClBC,OAAOC,KAAKF,GAAKG,SACnBjF,KAAKoE,iBACLI,YAAW,WACT,EAAKvD,cAAe,IACnB,QAITiE,QAzEa,WA0EXlF,KAAKmF,oBAAoBnF,KAAK+D,OAAOC,OAAOF,cAE9CsB,UA5Ea,WA6EXpF,KAAKqF,gCC1I8Y,I,oCCQnZC,EAAY,eACd,EACAxF,EACAiD,GACA,EACA,KACA,KACA,MAIa,aAAAuC,EAAiB,QAEhCA,EAAUC,QAAQpC,WAAa4B,OAAOS,OAAOT,OAAOU,OAAOH,EAAUC,QAAQpC,YAAc,MAAOmC,EAAUC,QAAQpC,YAAc,GAAI,CAACuC,MAAA,OAAMC,QAAA,OAAQC,QAAA,OAAQC,aAAA,OAAaC,QAAA,OAAQC,SAAA,OAASC,MAAA,OAAMC,OAAA,OAAOC,KAAA,U,6DCrBxM,yBAAklB,EAAG,G,kCCAtkB,QACd7C,SAAU,CACT3C,iBADS,WAER,OAAIV,KAAKmG,OAAOC,MAAMC,MAAMjD,MAAMpD,KAAK+D,OAAOC,OAAOF,aAC7C9D,KAAKmG,OAAOC,MAAMC,MAAMjD,MAAMpD,KAAK+D,OAAOC,OAAOF,aAElD,O,yCCNV,IAAIhE,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACU,YAAY,aAAaQ,MAAM,CAAC,UAAY,KAAKtB,EAAImB,GAAInB,EAAS,OAAE,SAASuG,EAAKlF,GAAK,OAAOjB,EAAG,SAAS,CAACoG,WAAW,CAAC,CAACvF,KAAK,SAASwF,QAAQ,aAAapF,IAAIA,EAAIC,MAAM,CAAC,GAAK,SAAWD,EAAI,UAAY,KAAK,CAACjB,EAAG,iBAAiB,CAACkB,MAAM,CAAC,OAAS,KAAK,CAAClB,EAAG,WAAW,CAACkB,MAAM,CAAC,MAAQ,UAAU,aAAa,UAAU,CAACtB,EAAIe,GAAGf,EAAIgB,GAAGuF,EAAKtF,KAAKyF,OAAO,QAAQ,GAAGtG,EAAG,iBAAiB,CAACA,EAAG,eAAe,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGuF,EAAKtF,UAAU,GAAGb,EAAG,iBAAiB,CAACkB,MAAM,CAAC,KAAO,KAAK,CAAClB,EAAG,UAAU,CAACkB,MAAM,CAAC,MAAQiF,EAAK3F,OAAS,gBAAkB,WAAW,CAACZ,EAAIe,GAAGf,EAAIgB,GAAGuF,EAAK3F,OAAS,SAAW,eAAe,IAAI,MAAK,IACvsBoC,EAAkB,G,grBCwBP,OACbM,SAAU,EAAF,GACHqD,eAAW,QAAS,CAAC,YC3B4X,I,wBCOpZpB,EAAY,eACd,EACAxF,EACAiD,GACA,EACA,KACA,KACA,MAIa,aAAAuC,EAAiB,QAEhCA,EAAUC,QAAQpC,WAAa4B,OAAOS,OAAOT,OAAOU,OAAOH,EAAUC,QAAQpC,YAAc,MAAOmC,EAAUC,QAAQpC,YAAc,GAAI,CAACuC,MAAA,OAAMiB,MAAA,OAAMC,MAAA,OAAMC,aAAA,OAAaC,QAAA,OAAQC,WAAA,OAAWC,OAAA,SACzL1B,EAAUC,QAAQgB,WAAaxB,OAAOS,OAAOT,OAAOU,OAAOH,EAAUC,QAAQgB,YAAc,MAAOjB,EAAUC,QAAQgB,YAAc,GAAI,CAACU,OAAA","file":"js/chunk-64f7cbdd.522b84b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-page',{ref:\"Chat\",class:_vm.$q.dark.isActive ? 'chatdark flex column' : 'chatlight flex column'},[(!_vm.otherUserDetails.online)?_c('q-banner',{staticClass:\"bg-grey-4 text-center fixed-top\"},[_vm._v(_vm._s(_vm.otherUserDetails.name)+\" : offline.\")]):_vm._e(),_c('div',{staticClass:\"q-pa-md column col justify-end\",class:{ 'invisible' : !_vm.showMessages }},_vm._l((_vm.messages),function(message,key){return _c('q-chat-message',{key:key,attrs:{\"name\":message.from == 'me' ? _vm.userDetails.name : _vm.otherUserDetails.name,\"text\":[message.text],\"sent\":message.from == 'me' ? true : false,\"bg-color\":message.from == 'me' ? 'amber-7' : 'primary',\"text-color\":message.from == 'me' ? 'black' : 'white',\"stamp\":_vm.getStamp(message.timestamp)}})}),1),_c('q-footer',{staticStyle:{\"background-color\":\"#010101\"},attrs:{\"elevated\":\"\"}},[_c('q-toolbar',[_c('q-form',{staticClass:\"full-width\",on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.sendMessage($event)}}},[_c('q-input',{ref:\"newMessage\",attrs:{\"bg-color\":_vm.$q.dark.isActive ? 'grey' : 'white',\"outlined\":\"\",\"rounded\":\"\",\"label\":\"Message\",\"dense\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }$event.preventDefault();return _vm.sendMessage($event)}},scopedSlots:_vm._u([{key:\"after\",fn:function(){return [_c('q-btn',{attrs:{\"round\":\"\",\"dense\":\"\",\"flat\":\"\",\"type\":\"submit\",\"color\":\"white\",\"icon\":\"send\"},on:{\"click\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.sendMessage($event)}}})]},proxy:true}]),model:{value:(_vm.newMessage),callback:function ($$v) {_vm.newMessage=$$v},expression:\"newMessage\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport users from \"./Users\";\nimport { mapState, mapActions } from \"vuex\";\nimport mixinOtherUserDetails from \"@/mixins/OtherUserDetails.js\";\nlet min_diff, hour_diff\n\nexport default {\n  mixins: [mixinOtherUserDetails],\n  data() {\n    return {\n      newMessage: \"\",\n      showMessages: false\n    };\n  },\n\n  components: {\n    users\n  },\n\n  computed: {\n    ...mapState(\"store\", [\"messages\", \"userDetails\"])\n  },\n  methods: {\n    ...mapActions(\"store\", [\n      \"firebaseGetMessages\",\n      \"firebaseStopGettingMessages\",\n      \"firebaseSendMessage\"\n    ]),\n    sendMessage() {\n      if (this.newMessage != \"\") {\n        console.log(\"sending message\", new Date().toLocaleString());\n        this.firebaseSendMessage({\n          message: {\n            text: this.newMessage,\n            timestamp: new Date().toLocaleString(),\n            from: \"me\"\n          },\n          otherUserId: this.$route.params.otherUserId\n        });\n        this.clearMessage();\n      }\n    },\n    clearMessage() {\n      this.newMessage = \"\";\n      this.$refs.newMessage.focus();\n    },\n    scrollToBottom() {\n      let chat = this.$refs.Chat.$el;\n      setTimeout(() => {\n        window.scrollTo(0, chat.scrollHeight);\n      }, 20);\n    },\n    getStamp(timestamp) {\n      return timestamp\n      // try {\n      //   min_diff =\n      //     (new Date(new Date().toLocaleString()).getTime() -\n      //       new Date(timestamp).getTime()) /\n      //     (1000 * 60);\n      //   if (min_diff <= 60) return Math.floor(min_diff) + \" minutes ago\";\n      //   hour_diff = min_diff / 60;\n      //   if (hour_diff <= 24) return Math.floor(hour_diff) + \" hours ago\";\n      //   return Math.floor(hour_diff / 24) + \" days ago\";\n      // } catch (err) {\n      //   console.log(err);\n      //   return \"30 minutes ago\";\n      // }\n    }\n  },\n  watch: {\n    messages: function(val) {\n      if (Object.keys(val).length) {\n        this.scrollToBottom();\n        setTimeout(() => {\n          this.showMessages = true;\n        }, 200);\n      }\n    }\n  },\n  mounted() {\n    this.firebaseGetMessages(this.$route.params.otherUserId);\n  },\n  destroyed() {\n    this.firebaseStopGettingMessages();\n  }\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Chat.vue?vue&type=template&id=0befa7c1&\"\nimport script from \"./Chat.vue?vue&type=script&lang=js&\"\nexport * from \"./Chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport {QPage,QBanner,QDrawer,QChatMessage,QFooter,QToolbar,QForm,QInput,QBtn} from 'quasar'\ncomponent.options.components = Object.assign(Object.create(component.options.components || null), component.options.components || {}, {QPage,QBanner,QDrawer,QChatMessage,QFooter,QToolbar,QForm,QInput,QBtn})\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Chat.vue?vue&type=style&index=0&lang=scss&\"","export default {\n\tcomputed: {\n\t\totherUserDetails() {\n\t\t\tif (this.$store.state.store.users[this.$route.params.otherUserId]) {\n\t\t\t\treturn this.$store.state.store.users[this.$route.params.otherUserId]\n\t\t\t}\n\t\t\treturn {}\n\t\t}\n\t}\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-list',{staticClass:\"full-width\",attrs:{\"separator\":\"\"}},_vm._l((_vm.users),function(user,key){return _c('q-item',{directives:[{name:\"ripple\",rawName:\"v-ripple\"}],key:key,attrs:{\"to\":'/chat/' + key,\"clickable\":\"\"}},[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-avatar',{attrs:{\"color\":\"primary\",\"text-color\":\"white\"}},[_vm._v(_vm._s(user.name.charAt(0)))])],1),_c('q-item-section',[_c('q-item-label',[_vm._v(_vm._s(user.name))])],1),_c('q-item-section',{attrs:{\"side\":\"\"}},[_c('q-badge',{attrs:{\"color\":user.online ? 'light-green-4' : 'grey-3'}},[_vm._v(_vm._s(user.online ? 'Online' : 'Offline'))])],1)],1)}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from \"vuex\";\n\nexport default {\n  computed: {\n    ...mapGetters(\"store\", [\"users\"])\n  }\n};\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Users.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Users.vue?vue&type=template&id=2fbdc354&\"\nimport script from \"./Users.vue?vue&type=script&lang=js&\"\nexport * from \"./Users.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport {QPage,QList,QItem,QItemSection,QAvatar,QItemLabel,QBadge,Ripple} from 'quasar'\ncomponent.options.components = Object.assign(Object.create(component.options.components || null), component.options.components || {}, {QPage,QList,QItem,QItemSection,QAvatar,QItemLabel,QBadge})\ncomponent.options.directives = Object.assign(Object.create(component.options.directives || null), component.options.directives || {}, {Ripple})\n"],"sourceRoot":""}