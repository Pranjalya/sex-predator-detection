(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64f7cbdd","chunk-2d2308ce"],{"293a":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{ref:"Chat",class:e.$q.dark.isActive?"chatdark flex column":"chatlight flex column"},[e.otherUserDetails.online?e._e():s("q-banner",{staticClass:"bg-grey-4 text-center fixed-top"},[e._v(e._s(e.otherUserDetails.name)+" : offline.")]),s("div",{staticClass:"q-pa-md column col justify-end",class:{invisible:!e.showMessages}},e._l(e.messages,(function(t,r){return s("q-chat-message",{key:r,attrs:{name:"me"==t.from?e.userDetails.name:e.otherUserDetails.name,text:[t.text],sent:"me"==t.from,"bg-color":"me"==t.from?"amber-7":"primary","text-color":"me"==t.from?"black":"white",stamp:e.getStamp(t.timestamp)}})})),1),s("q-footer",{staticStyle:{"background-color":"#010101"},attrs:{elevated:""}},[s("q-toolbar",[s("q-form",{staticClass:"full-width",on:{submit:function(t){return t.preventDefault(),t.stopPropagation(),e.sendMessage(t)}}},[s("q-input",{ref:"newMessage",attrs:{"bg-color":e.$q.dark.isActive?"grey":"white",outlined:"",rounded:"",label:"Message",dense:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.sendMessage(t))}},scopedSlots:e._u([{key:"after",fn:function(){return[s("q-btn",{attrs:{round:"",dense:"",flat:"",type:"submit",color:"white",icon:"send"},on:{click:function(t){return t.preventDefault(),t.stopPropagation(),e.sendMessage(t)}}})]},proxy:!0}]),model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}})],1)],1)],1)],1)},n=[],o=(s("a4d3"),s("4de4"),s("4160"),s("0d03"),s("1d1c"),s("7a82"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("4795"),s("2fa7")),a=s("ed81"),i=s("2f62"),c=s("a517");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(s,!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var f={mixins:[c["a"]],data:function(){return{newMessage:"",showMessages:!1}},components:{users:a["default"]},computed:u({},Object(i["d"])("store",["messages","userDetails"])),methods:u({},Object(i["b"])("store",["firebaseGetMessages","firebaseStopGettingMessages","firebaseSendMessage"]),{sendMessage:function(){""!=this.newMessage&&(console.log("sending message",(new Date).toLocaleString()),this.firebaseSendMessage({message:{text:this.newMessage,timestamp:(new Date).toLocaleString(),from:"me"},otherUserId:this.$route.params.otherUserId}),this.clearMessage())},clearMessage:function(){this.newMessage="",this.$refs.newMessage.focus()},scrollToBottom:function(){var e=this.$refs.Chat.$el;setTimeout((function(){window.scrollTo(0,e.scrollHeight)}),20)},getStamp:function(e){return e}}),watch:{messages:function(e){var t=this;Object.keys(e).length&&(this.scrollToBottom(),setTimeout((function(){t.showMessages=!0}),200))}},mounted:function(){this.firebaseGetMessages(this.$route.params.otherUserId)},destroyed:function(){this.firebaseStopGettingMessages()}},p=f,m=(s("9c66"),s("2877")),b=s("fe09"),g=Object(m["a"])(p,r,n,!1,null,null,null);t["default"]=g.exports;g.options.components=Object.assign(Object.create(g.options.components||null),g.options.components||{},{QPage:b["r"],QBanner:b["d"],QDrawer:b["h"],QChatMessage:b["g"],QFooter:b["i"],QToolbar:b["z"],QForm:b["j"],QInput:b["l"],QBtn:b["e"]})},"84f3":function(e,t,s){},"9c66":function(e,t,s){"use strict";var r=s("84f3"),n=s.n(r);n.a},a517:function(e,t,s){"use strict";t["a"]={computed:{otherUserDetails:function(){return this.$store.state.store.users[this.$route.params.otherUserId]?this.$store.state.store.users[this.$route.params.otherUserId]:{}}}}},ed81:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-list",{staticClass:"full-width",attrs:{separator:""}},e._l(e.users,(function(t,r){return s("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:r,attrs:{to:"/chat/"+r,clickable:""}},[s("q-item-section",{attrs:{avatar:""}},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[e._v(e._s(t.name.charAt(0)))])],1),s("q-item-section",[s("q-item-label",[e._v(e._s(t.name))])],1),s("q-item-section",{attrs:{side:""}},[s("q-badge",{attrs:{color:t.online?"light-green-4":"grey-3"}},[e._v(e._s(t.online?"Online":"Offline"))])],1)],1)})),1)},n=[],o=(s("a4d3"),s("4de4"),s("4160"),s("1d1c"),s("7a82"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("2fa7")),a=s("2f62");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(s,!0).forEach((function(t){Object(o["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(s).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var l={computed:c({},Object(a["c"])("store",["users"]))},u=l,f=s("2877"),p=s("fe09"),m=Object(f["a"])(u,r,n,!1,null,null,null);t["default"]=m.exports;m.options.components=Object.assign(Object.create(m.options.components||null),m.options.components||{},{QPage:p["r"],QList:p["q"],QItem:p["m"],QItemSection:p["o"],QAvatar:p["b"],QItemLabel:p["n"],QBadge:p["c"]}),m.options.directives=Object.assign(Object.create(m.options.directives||null),m.options.directives||{},{Ripple:p["B"]})}}]);
//# sourceMappingURL=chunk-64f7cbdd.522b84b3.js.map